(env) E:\angelo_script_small\reel_gen>python main_reel_generator.py
Angelo's Reel Generation POC
==================================================
2025-11-06 19:28:23,359 [INFO] __main__: Initializing reel generation components...
2025-11-06 19:28:23,360 [INFO] whisper_processor: Initializing Whisper client...
2025-11-06 19:28:23,360 [INFO] whisper_processor: Whisper service endpoint: https://c3c6765a3991.ngrok-free.app//process_audio
2025-11-06 19:28:23,361 [INFO] keyword_extractor: Initializing Cohere LLM for keyword extraction...
2025-11-06 19:28:25,804 [INFO] httpx: HTTP Request: GET https://api.cohere.com/v1/models?endpoint=chat&default_only=true "HTTP/1.1 200 OK"
2025-11-06 19:28:25,807 [INFO] keyword_extractor: Cohere keyword extractor initialized
2025-11-06 19:28:25,809 [INFO] pexels_client: Pexels client initialized
2025-11-06 19:28:25,811 [INFO] video_assembler: Using subtitle font: C:\Windows\Fonts\Arial.ttf
2025-11-06 19:28:25,811 [INFO] video_assembler: Video assembler initialized
2025-11-06 19:28:25,812 [INFO] video_assembler:    Output resolution: 1080x1920
2025-11-06 19:28:25,812 [INFO] video_assembler:    Temp directory: C:\Users\Admin\AppData\Local\Temp\tmpesn1jm4s
2025-11-06 19:28:25,812 [INFO] __main__: All components initialized successfully
2025-11-06 19:28:25,813 [INFO] __main__: Starting reel generation for: demovideo1.mp3
2025-11-06 19:28:25,813 [INFO] __main__: Step 1: Transcribing Italian audio...
2025-11-06 19:28:25,813 [INFO] whisper_processor: Starting transcription of: demovideo1.mp3
2025-11-06 19:28:25,814 [INFO] whisper_processor: Reading and encoding audio file...
2025-11-06 19:28:25,820 [INFO] whisper_processor: Audio file size: 698.00 KB
2025-11-06 19:28:25,821 [INFO] whisper_processor: Sending request to Whisper service: https://c3c6765a3991.ngrok-free.app//process_audio
2025-11-06 19:28:43,935 [INFO] whisper_processor: Received response from Whisper service
2025-11-06 19:28:43,936 [INFO] whisper_processor: Transcription summary:
2025-11-06 19:28:43,936 [INFO] whisper_processor:    Words: 128
2025-11-06 19:28:43,937 [INFO] whisper_processor:    Lines: 25
2025-11-06 19:28:43,938 [INFO] whisper_processor:    Duration: 44.3s
2025-11-06 19:28:43,938 [INFO] whisper_processor:    Language: it
2025-11-06 19:28:43,939 [INFO] __main__: Transcription complete: 128 words detected
2025-11-06 19:28:43,940 [INFO] __main__: Step 2: Extracting keywords for video search...
2025-11-06 19:28:43,940 [INFO] keyword_extractor: Extracting keywords from transcript...
2025-11-06 19:28:44,631 [INFO] httpx: HTTP Request: POST https://api.cohere.com/v2/chat "HTTP/1.1 200 OK"
2025-11-06 19:28:44,637 [INFO] keyword_extractor: Extracted keywords: ['team', 'collaboration', 'discussion', 'office', 'professional']
2025-11-06 19:28:44,639 [INFO] __main__: Keywords extracted: ['team', 'collaboration', 'discussion', 'office', 'professional']
2025-11-06 19:28:44,639 [INFO] __main__: Step 3: Searching for relevant videos...
2025-11-06 19:28:44,640 [INFO] pexels_client: Searching Pexels for videos...
2025-11-06 19:28:44,640 [INFO] pexels_client:    Keywords: ['team', 'collaboration', 'discussion', 'office', 'professional']
2025-11-06 19:28:44,641 [INFO] pexels_client:    Target duration: 44.3 seconds
2025-11-06 19:28:44,641 [INFO] pexels_client: Searching with strict query: 'team corporate business professional office'
2025-11-06 19:28:45,752 [INFO] pexels_client: Found 10 videos for keyword 'team':
2025-11-06 19:28:45,753 [INFO] pexels_client:   Option 1: ID=34554258, Duration=11s
2025-11-06 19:28:45,753 [INFO] pexels_client:     User: khezez  |
2025-11-06 19:28:45,754 [INFO] pexels_client:     URL: https://www.pexels.com/video/team-collaboration-in-office-meeting-room-34554258/
2025-11-06 19:28:45,755 [INFO] pexels_client:   Option 2: ID=6773635, Duration=10s
2025-11-06 19:28:45,755 [INFO] pexels_client:     User: Kindel Media
2025-11-06 19:28:45,756 [INFO] pexels_client:     URL: https://www.pexels.com/video/a-woman-working-with-a-laptop-6773635/
2025-11-06 19:28:45,756 [INFO] pexels_client:   Option 3: ID=5438985, Duration=12s
2025-11-06 19:28:45,757 [INFO] pexels_client:     User: Tima Miroshnichenko
2025-11-06 19:28:45,757 [INFO] pexels_client:     URL: https://www.pexels.com/video/businesspeople-doing-a-handshake-5438985/
2025-11-06 19:28:45,758 [INFO] pexels_client: Selected video 34554258 with score 9 for keyword 'team'
2025-11-06 19:28:45,759 [INFO] pexels_client: Found video for 'team': 11s
2025-11-06 19:28:45,759 [INFO] pexels_client: Searching with strict query: 'collaboration corporate business professional office'
2025-11-06 19:28:46,406 [INFO] pexels_client: Found 10 videos for keyword 'collaboration':
2025-11-06 19:28:46,407 [INFO] pexels_client:   Option 1: ID=34554258, Duration=11s
2025-11-06 19:28:46,407 [INFO] pexels_client:     User: khezez  |
2025-11-06 19:28:46,408 [INFO] pexels_client:     URL: https://www.pexels.com/video/team-collaboration-in-office-meeting-room-34554258/
2025-11-06 19:28:46,408 [INFO] pexels_client:   Option 2: ID=12894328, Duration=10s
2025-11-06 19:28:46,409 [INFO] pexels_client:     User: Mizuno K
2025-11-06 19:28:46,409 [INFO] pexels_client:     URL: https://www.pexels.com/video/hands-of-businesspeople-during-a-meeting-in-an-office-12894328/
2025-11-06 19:28:46,410 [INFO] pexels_client:   Option 3: ID=8814706, Duration=8s
2025-11-06 19:28:46,410 [INFO] pexels_client:     User: Kampus Production
2025-11-06 19:28:46,411 [INFO] pexels_client:     URL: https://www.pexels.com/video/a-person-signing-an-agreement-8814706/
2025-11-06 19:28:46,411 [INFO] pexels_client: Selected video 12894328 with score 7 for keyword 'collaboration'
2025-11-06 19:28:46,412 [INFO] pexels_client: Found video for 'collaboration': 10s
2025-11-06 19:28:46,413 [INFO] pexels_client: Searching with strict query: 'discussion corporate business professional office'
2025-11-06 19:28:47,060 [INFO] pexels_client: Found 10 videos for keyword 'discussion':
2025-11-06 19:28:47,061 [INFO] pexels_client:   Option 1: ID=34554258, Duration=11s
2025-11-06 19:28:47,061 [INFO] pexels_client:     User: khezez  |
2025-11-06 19:28:47,062 [INFO] pexels_client:     URL: https://www.pexels.com/video/team-collaboration-in-office-meeting-room-34554258/
2025-11-06 19:28:47,062 [INFO] pexels_client:   Option 2: ID=12894328, Duration=10s
2025-11-06 19:28:47,063 [INFO] pexels_client:     User: Mizuno K
2025-11-06 19:28:47,064 [INFO] pexels_client:     URL: https://www.pexels.com/video/hands-of-businesspeople-during-a-meeting-in-an-office-12894328/
2025-11-06 19:28:47,064 [INFO] pexels_client:   Option 3: ID=8814706, Duration=8s
2025-11-06 19:28:47,065 [INFO] pexels_client:     User: Kampus Production
2025-11-06 19:28:47,065 [INFO] pexels_client:     URL: https://www.pexels.com/video/a-person-signing-an-agreement-8814706/
2025-11-06 19:28:47,066 [INFO] pexels_client: Selected video 5439028 with score 5 for keyword 'discussion'
2025-11-06 19:28:47,067 [INFO] pexels_client: Found video for 'discussion': 13s
2025-11-06 19:28:47,067 [INFO] pexels_client: Searching with strict query: 'office corporate business professional office'
2025-11-06 19:28:48,098 [INFO] pexels_client: Found 10 videos for keyword 'office':
2025-11-06 19:28:48,098 [INFO] pexels_client:   Option 1: ID=34554258, Duration=11s
2025-11-06 19:28:48,099 [INFO] pexels_client:     User: khezez  |
2025-11-06 19:28:48,099 [INFO] pexels_client:     URL: https://www.pexels.com/video/team-collaboration-in-office-meeting-room-34554258/
2025-11-06 19:28:48,100 [INFO] pexels_client:   Option 2: ID=6931246, Duration=13s
2025-11-06 19:28:48,100 [INFO] pexels_client:     User: Mikhail Nilov
2025-11-06 19:28:48,101 [INFO] pexels_client:     URL: https://www.pexels.com/video/a-person-writing-while-using-laptop-6931246/
2025-11-06 19:28:48,102 [INFO] pexels_client:   Option 3: ID=12909007, Duration=10s
2025-11-06 19:28:48,102 [INFO] pexels_client:     User: Mizuno K
2025-11-06 19:28:48,103 [INFO] pexels_client:     URL: https://www.pexels.com/video/sad-depressed-woman-sitting-on-the-floor-in-an-office-12909007/
2025-11-06 19:28:48,103 [INFO] pexels_client: Selected video 5438985 with score 5 for keyword 'office'
2025-11-06 19:28:48,104 [INFO] pexels_client: Found video for 'office': 12s
2025-11-06 19:28:48,105 [INFO] pexels_client: Searching with strict query: 'professional corporate business professional office'
2025-11-06 19:28:48,776 [INFO] pexels_client: Found 10 videos for keyword 'professional':
2025-11-06 19:28:48,777 [INFO] pexels_client:   Option 1: ID=34554258, Duration=11s
2025-11-06 19:28:48,777 [INFO] pexels_client:     User: khezez  |
2025-11-06 19:28:48,778 [INFO] pexels_client:     URL: https://www.pexels.com/video/team-collaboration-in-office-meeting-room-34554258/
2025-11-06 19:28:48,779 [INFO] pexels_client:   Option 2: ID=6931246, Duration=13s
2025-11-06 19:28:48,779 [INFO] pexels_client:     User: Mikhail Nilov
2025-11-06 19:28:48,780 [INFO] pexels_client:     URL: https://www.pexels.com/video/a-person-writing-while-using-laptop-6931246/
2025-11-06 19:28:48,780 [INFO] pexels_client:   Option 3: ID=12909007, Duration=10s
2025-11-06 19:28:48,781 [INFO] pexels_client:     User: Mizuno K
2025-11-06 19:28:48,781 [INFO] pexels_client:     URL: https://www.pexels.com/video/sad-depressed-woman-sitting-on-the-floor-in-an-office-12909007/
2025-11-06 19:28:48,782 [INFO] pexels_client: Selected video 12909007 with score 3 for keyword 'professional'
2025-11-06 19:28:48,783 [INFO] pexels_client: Found video for 'professional': 10s
2025-11-06 19:28:48,784 [INFO] pexels_client: Found 5 video segments
2025-11-06 19:28:48,784 [INFO] __main__: Found 5 video segments
2025-11-06 19:28:48,785 [INFO] __main__: Step 3.5: Downloading video files...
2025-11-06 19:28:48,786 [INFO] pexels_client: Downloading 5 video segments...
2025-11-06 19:28:48,786 [INFO] pexels_client: Downloading video: team (11s)
2025-11-06 19:28:49,013 [INFO] pexels_client: Downloaded: C:\Users\Admin\AppData\Local\Temp\pexels_34554258_team.mp4 (1526 KB)
2025-11-06 19:28:49,014 [INFO] pexels_client: Downloading video: collaboration (10s)
2025-11-06 19:28:49,299 [INFO] pexels_client: Downloaded: C:\Users\Admin\AppData\Local\Temp\pexels_12894328_collaboration.mp4 (2822 KB)
2025-11-06 19:28:49,301 [INFO] pexels_client: Downloading video: discussion (13s)
2025-11-06 19:29:10,349 [INFO] pexels_client: Downloaded: C:\Users\Admin\AppData\Local\Temp\pexels_5439028_discussion.mp4 (2977 KB)
2025-11-06 19:29:10,350 [INFO] pexels_client: Downloading video: office (12s)
2025-11-06 19:29:10,586 [INFO] pexels_client: Downloaded: C:\Users\Admin\AppData\Local\Temp\pexels_5438985_office.mp4 (1617 KB)
2025-11-06 19:29:10,586 [INFO] pexels_client: Downloading video: professional (10s)
2025-11-06 19:29:22,896 [INFO] pexels_client: Downloaded: C:\Users\Admin\AppData\Local\Temp\pexels_12909007_professional.mp4 (1617 KB)
2025-11-06 19:29:22,896 [INFO] pexels_client: Successfully downloaded 5 videos
2025-11-06 19:29:22,897 [INFO] __main__: Downloaded 5 video files
2025-11-06 19:29:22,897 [INFO] __main__: Step 4: Assembling final video...
2025-11-06 19:29:22,898 [INFO] video_assembler: Starting final video assembly...
2025-11-06 19:29:22,898 [INFO] video_assembler: Step 1: Processing video files...
2025-11-06 19:29:22,899 [INFO] video_assembler:    Processing clip 1/5: C:\Users\Admin\AppData\Local\Temp\pexels_34554258_team.mp4
{'video_found': True, 'audio_found': False, 'metadata': {'major_brand': 'iso5', 'minor_version': '512', 'compatible_brands': 'iso5iso6mp41', 'encoder': 'Lavf60.16.100'}, 'inputs': [{'streams': [{'input_number': 0, 'stream_number': 0, 'stream_type': 'video', 'language': None, 'default': True, 'size': [360, 640], 'bitrate': 1081, 'fps': 50.0, 'codec_name': 'h264', 'profile': '(High)', 'metadata': {'Metadata': '', 'handler_name': 'Video Media Handler', 'vendor_id': '[0][0][0][0]', 'encoder': 'Lavc60.31.102 libx264'}}], 'input_number': 0}], 'duration': 11.52, 'bitrate': 1085, 'start': 0.0, 'default_video_input_number': 0, 'default_video_stream_number': 0, 'video_codec_name': 'h264', 'video_profile': '(High)', 'video_size': [360, 640], 'video_bitrate': 1081, 'video_fps': 50.0, 'video_duration': 11.52, 'video_n_frames': 576}
E:\angelo_script_small\env\Lib\site-packages\imageio_ffmpeg\binaries\ffmpeg-win-x86_64-v7.1.exe -i C:\Users\Admin\AppData\Local\Temp\pexels_34554258_team.mp4 -loglevel error -f image2pipe -vf scale=360:640 -sws_flags bicubic -pix_fmt rgb24 -vcodec rawvideo -
2025-11-06 19:29:23,140 [INFO] video_assembler:      Adjusting resolution from 360x640 to 1080x1920
2025-11-06 19:29:23,219 [INFO] video_assembler: Processed: 8.9s, 1080x1920
2025-11-06 19:29:23,220 [INFO] video_assembler:    Processing clip 2/5: C:\Users\Admin\AppData\Local\Temp\pexels_12894328_collaboration.mp4
{'video_found': True, 'audio_found': False, 'metadata': {'major_brand': 'mp42', 'minor_version': '0', 'compatible_brands': 'mp42isomavc1', 'creation_time': '2022-07-19T06:06:49.000000Z'}, 'inputs': [{'streams': [{'input_number': 0, 'stream_number': 0, 'stream_type': 'video', 'language': None, 'default': True, 'size': [720, 1280], 'bitrate': 2306, 'fps': 23.976023976023978, 'codec_name': 'h264', 'profile': '(High)', 'metadata': {'Metadata': '', 'creation_time': '2022-07-19T06:06:49.000000Z', 'handler_name': 'Vimeo Artax Video Handler', 'vendor_id': '[0][0][0][0]', 'encoder': 'AVC Coding'}}], 'input_number': 0}], 'duration': 10.01, 'bitrate': 2309, 'start': 0.0, 'default_video_input_number': 0, 'default_video_stream_number': 0, 'video_codec_name': 'h264', 'video_profile': '(High)', 'video_size': [720, 1280], 'video_bitrate': 2306, 'video_fps': 23.976023976023978, 'video_duration': 10.01, 'video_n_frames': 240}
E:\angelo_script_small\env\Lib\site-packages\imageio_ffmpeg\binaries\ffmpeg-win-x86_64-v7.1.exe -i C:\Users\Admin\AppData\Local\Temp\pexels_12894328_collaboration.mp4 -loglevel error -f image2pipe -vf scale=720:1280 -sws_flags bicubic -pix_fmt rgb24 -vcodec rawvideo -
2025-11-06 19:29:23,395 [INFO] video_assembler:      Adjusting resolution from 720x1280 to 1080x1920
2025-11-06 19:29:23,514 [INFO] video_assembler: Processed: 8.9s, 1080x1920
2025-11-06 19:29:23,515 [INFO] video_assembler:    Processing clip 3/5: C:\Users\Admin\AppData\Local\Temp\pexels_5439028_discussion.mp4
{'video_found': True, 'audio_found': False, 'metadata': {'major_brand': 'mp42', 'minor_version': '0', 'compatible_brands': 'mp42mp41isomavc1', 'creation_time': '2020-09-25T00:15:52.000000Z'}, 'inputs': [{'streams': [{'input_number': 0, 'stream_number': 0, 'stream_type': 'video', 'language': None, 'default': True, 'size': [720, 1280], 'bitrate': 1811, 'fps': 25.0, 'codec_name': 'h264', 'profile': '(High)', 'metadata': {'Metadata': '', 'creation_time': '2020-09-25T00:15:52.000000Z', 'handler_name': 'L-SMASH Video Handler', 'vendor_id': '[0][0][0][0]', 'encoder': 'AVC Coding'}}], 'input_number': 0}], 'duration': 13.44, 'bitrate': 1815, 'start': 0.0, 'default_video_input_number': 0, 'default_video_stream_number': 0, 'video_codec_name': 'h264', 'video_profile': '(High)', 'video_size': [720, 1280], 'video_bitrate': 1811, 'video_fps': 25.0, 'video_duration': 13.44, 'video_n_frames': 336}
E:\angelo_script_small\env\Lib\site-packages\imageio_ffmpeg\binaries\ffmpeg-win-x86_64-v7.1.exe -i C:\Users\Admin\AppData\Local\Temp\pexels_5439028_discussion.mp4 -loglevel error -f image2pipe -vf scale=720:1280 -sws_flags bicubic -pix_fmt rgb24 -vcodec rawvideo -
2025-11-06 19:29:23,695 [INFO] video_assembler:      Adjusting resolution from 720x1280 to 1080x1920
2025-11-06 19:29:24,373 [INFO] video_assembler: Processed: 8.9s, 1080x1920
2025-11-06 19:29:24,375 [INFO] video_assembler:    Processing clip 4/5: C:\Users\Admin\AppData\Local\Temp\pexels_5438985_office.mp4
{'video_found': True, 'audio_found': False, 'metadata': {'major_brand': 'mp42', 'minor_version': '0', 'compatible_brands': 'mp42mp41isomavc1', 'creation_time': '2020-09-25T00:09:44.000000Z'}, 'inputs': [{'streams': [{'input_number': 0, 'stream_number': 0, 'stream_type': 'video', 'language': None, 'default': True, 'size': [720, 1280], 'bitrate': 1079, 'fps': 25.0, 'codec_name': 'h264', 'profile': '(High)', 'metadata': {'Metadata': '', 'creation_time': '2020-09-25T00:09:44.000000Z', 'handler_name': 'L-SMASH Video Handler', 'vendor_id': '[0][0][0][0]', 'encoder': 'AVC Coding'}}], 'input_number': 0}], 'duration': 12.24, 'bitrate': 1082, 'start': 0.0, 'default_video_input_number': 0, 'default_video_stream_number': 0, 'video_codec_name': 'h264', 'video_profile': '(High)', 'video_size': [720, 1280], 'video_bitrate': 1079, 'video_fps': 25.0, 'video_duration': 12.24, 'video_n_frames': 306}
E:\angelo_script_small\env\Lib\site-packages\imageio_ffmpeg\binaries\ffmpeg-win-x86_64-v7.1.exe -i C:\Users\Admin\AppData\Local\Temp\pexels_5438985_office.mp4 -loglevel error -f image2pipe -vf scale=720:1280 -sws_flags bicubic -pix_fmt rgb24 -vcodec rawvideo -
2025-11-06 19:29:25,504 [INFO] video_assembler:      Adjusting resolution from 720x1280 to 1080x1920
2025-11-06 19:29:26,836 [INFO] video_assembler: Processed: 8.9s, 1080x1920
2025-11-06 19:29:26,838 [INFO] video_assembler:    Processing clip 5/5: C:\Users\Admin\AppData\Local\Temp\pexels_12909007_professional.mp4
{'video_found': True, 'audio_found': False, 'metadata': {'major_brand': 'mp42', 'minor_version': '0', 'compatible_brands': 'mp42isomavc1', 'creation_time': '2022-07-20T05:30:07.000000Z'}, 'inputs': [{'streams': [{'input_number': 0, 'stream_number': 0, 'stream_type': 'video', 'language': None, 'default': True, 'size': [720, 1280], 'bitrate': 1320, 'fps': 23.976023976023978, 'codec_name': 'h264', 'profile': '(High)', 'metadata': {'Metadata': '', 'creation_time': '2022-07-20T05:30:07.000000Z', 'handler_name': 'Vimeo Artax Video Handler', 'vendor_id': '[0][0][0][0]', 'encoder': 'AVC Coding'}}], 'input_number': 0}], 'duration': 10.01, 'bitrate': 1324, 'start': 0.0, 'default_video_input_number': 0, 'default_video_stream_number': 0, 'video_codec_name': 'h264', 'video_profile': '(High)', 'video_size': [720, 1280], 'video_bitrate': 1320, 'video_fps': 23.976023976023978, 'video_duration': 10.01, 'video_n_frames': 240}
E:\angelo_script_small\env\Lib\site-packages\imageio_ffmpeg\binaries\ffmpeg-win-x86_64-v7.1.exe -i C:\Users\Admin\AppData\Local\Temp\pexels_12909007_professional.mp4 -loglevel error -f image2pipe -vf scale=720:1280 -sws_flags bicubic -pix_fmt rgb24 -vcodec rawvideo -
2025-11-06 19:29:28,769 [INFO] video_assembler:      Adjusting resolution from 720x1280 to 1080x1920
2025-11-06 19:29:29,056 [INFO] video_assembler: Processed: 8.9s, 1080x1920
2025-11-06 19:29:29,057 [INFO] video_assembler: Step 2: Concatenating video segments...
2025-11-06 19:29:30,739 [INFO] video_assembler: Concatenated 5 clips -> 44.3s total
2025-11-06 19:29:30,739 [INFO] video_assembler: Step 3: Adding audio layers...
2025-11-06 19:29:31,020 [INFO] video_assembler:    Adding background music: temp_audio_1305.wav
2025-11-06 19:29:31,234 [INFO] video_assembler:    Background music volume set to 40% for audibility
2025-11-06 19:29:31,235 [INFO] video_assembler: Audio added: 44.3s
2025-11-06 19:29:31,236 [INFO] video_assembler: Step 4: Adding Italian subtitles...
2025-11-06 19:29:31,236 [INFO] video_assembler: Creating subtitles for 128 words with color: white
2025-11-06 19:29:32,795 [INFO] video_assembler: Added 128 subtitle clips
2025-11-06 19:29:32,796 [INFO] video_assembler: Step 5: Exporting final video...
2025-11-06 19:29:32,797 [INFO] video_assembler:    Exporting to: output_videos\angelo_business_reel_poc.mp4
MoviePy - Building video output_videos\angelo_business_reel_poc.mp4.
MoviePy - Writing audio in temp-audio.m4a
MoviePy - Done.
MoviePy - Writing video output_videos\angelo_business_reel_poc.mp4

frame_index:   0%|‚ñç                                                                                                                                                              | 4/1329 [00:02<15:38,  1.41it/s, now=None]
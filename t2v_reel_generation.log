2025-11-07 19:57:29,745 [INFO] __main__: Initializing T2V reel generation components...
2025-11-07 19:57:29,746 [INFO] whisper_processor: Initializing Whisper client...
2025-11-07 19:57:29,746 [INFO] whisper_processor: Whisper service endpoint: https://3cbca62652ae.ngrok-free.app/process_audio
2025-11-07 19:57:29,748 [INFO] keyword_extractor: Initializing Cohere LLM for keyword extraction...
2025-11-07 19:57:31,833 [INFO] httpx: HTTP Request: GET https://api.cohere.com/v1/models?endpoint=chat&default_only=true "HTTP/1.1 200 OK"
2025-11-07 19:57:31,837 [INFO] keyword_extractor: Cohere keyword extractor initialized
2025-11-07 19:57:31,838 [INFO] video_prompt_generator: Initializing Cohere LLM for video prompt generation...
2025-11-07 19:57:33,000 [INFO] httpx: HTTP Request: GET https://api.cohere.com/v1/models?endpoint=chat&default_only=true "HTTP/1.1 200 OK"
2025-11-07 19:57:33,003 [INFO] video_prompt_generator: Cohere video prompt generator initialized
2025-11-07 19:57:33,003 [INFO] t2v_client: Initializing T2V client...
2025-11-07 19:57:33,004 [INFO] t2v_client: T2V service endpoint: https://eda5b54c7ec4.ngrok-free.app/generate_video
2025-11-07 19:57:33,988 [INFO] t2v_client: T2V service status: ready
2025-11-07 19:57:33,988 [INFO] t2v_client: GPU available: True
2025-11-07 19:57:33,989 [INFO] t2v_client: GPU: Tesla T4
2025-11-07 19:57:33,991 [INFO] video_assembler: Using subtitle font: C:\Windows\Fonts\Arial.ttf
2025-11-07 19:57:33,992 [INFO] video_assembler: Video assembler initialized
2025-11-07 19:57:33,992 [INFO] video_assembler:    Output resolution: 1080x1920
2025-11-07 19:57:33,993 [INFO] video_assembler:    Temp directory: C:\Users\Admin\AppData\Local\Temp\tmpudhbmbw5
2025-11-07 19:57:33,993 [INFO] __main__: All T2V components initialized successfully
2025-11-07 19:57:39,795 [INFO] whisper_processor: Starting transcription of: demovideo1.mp3
2025-11-07 19:57:39,796 [INFO] whisper_processor: Reading and encoding audio file...
2025-11-07 19:57:39,801 [INFO] whisper_processor: Audio file size: 698.00 KB
2025-11-07 19:57:39,802 [INFO] whisper_processor: Sending request to Whisper service: https://3cbca62652ae.ngrok-free.app/process_audio
2025-11-07 19:57:43,584 [INFO] whisper_processor: Received response from Whisper service
2025-11-07 19:57:43,584 [INFO] whisper_processor: Transcription summary:
2025-11-07 19:57:43,585 [INFO] whisper_processor:    Words: 128
2025-11-07 19:57:43,585 [INFO] whisper_processor:    Lines: 25
2025-11-07 19:57:43,586 [INFO] whisper_processor:    Duration: 44.3s
2025-11-07 19:57:43,586 [INFO] whisper_processor:    Language: it
2025-11-07 19:57:43,587 [INFO] __main__: Transcription complete: 128 words detected
2025-11-07 19:57:43,592 [INFO] keyword_extractor: Extracting keywords from transcript...
2025-11-07 19:57:44,587 [INFO] httpx: HTTP Request: POST https://api.cohere.com/v2/chat "HTTP/1.1 200 OK"
2025-11-07 19:57:44,734 [INFO] keyword_extractor: Extracted keywords: ['team', 'collaboration', 'discussion', 'office', 'professional']
2025-11-07 19:57:44,734 [INFO] __main__: Keywords extracted: ['team', 'collaboration', 'discussion', 'office', 'professional']
2025-11-07 19:57:44,738 [INFO] video_prompt_generator: Generating video sequence from Italian transcript...
2025-11-07 19:57:44,739 [INFO] video_prompt_generator: Target duration: 44.32s
2025-11-07 19:57:44,739 [INFO] video_prompt_generator: Transcript preview: Gestire tutto da solo? È un po' come navigare in mare aperto senza busso, la prima o poi ti perdi. C...
2025-11-07 19:57:44,840 [ERROR] video_prompt_generator: Video prompt generation failed: 'Input to ChatPromptTemplate is missing variables {\'\\n  "video_sequence"\'}.  Expected: [\'\\n  "video_sequence"\', \'transcript\'] Received: [\'transcript\']\nNote: if you intended {\n  "video_sequence"} to be part of the string and not a variable, please escape it with double curly braces like: \'{{\n  "video_sequence"}}\'.\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_PROMPT_INPUT '
2025-11-07 19:57:44,840 [INFO] video_prompt_generator: Generated 8 fallback business prompts
2025-11-07 19:57:44,841 [WARNING] video_prompt_generator: Using 8 fallback video prompts
2025-11-07 19:57:44,841 [INFO] __main__: Generated 8 video prompts for 44.3s
2025-11-07 19:57:44,850 [INFO] t2v_client: Generating 8 videos via T2V service
2025-11-07 19:57:44,854 [INFO] t2v_client: Generating video 1/8: business_scene_1
2025-11-07 19:57:44,854 [INFO] t2v_client: Prompt: 'Professional businesswoman presenting financial charts to executive team in bright conference room'
2025-11-07 20:01:54,615 [INFO] t2v_client:    File: temp_t2v_0_business_scene_1_1762527714.mp4 (2.7 KB)
2025-11-07 20:01:54,616 [WARNING] t2v_client: Video file very small: 2761 bytes
2025-11-07 20:01:54,629 [INFO] t2v_client: Generating video 2/8: business_scene_2
2025-11-07 20:01:54,630 [INFO] t2v_client: Prompt: 'Two business executives shaking hands across modern glass meeting table'
2025-11-07 20:05:47,122 [INFO] t2v_client:    File: temp_t2v_1_business_scene_2_1762527947.mp4 (38.9 KB)
2025-11-07 20:05:47,132 [INFO] t2v_client: Generating video 3/8: business_scene_3
2025-11-07 20:05:47,133 [INFO] t2v_client: Prompt: 'Corporate team collaborating on project around whiteboard in contemporary office'
2025-11-07 20:09:39,836 [INFO] t2v_client:    File: temp_t2v_2_business_scene_3_1762528179.mp4 (53.9 KB)
2025-11-07 20:09:39,845 [INFO] t2v_client: Generating video 4/8: business_scene_4
2025-11-07 20:09:39,845 [INFO] t2v_client: Prompt: 'Business manager reviewing documents with client in professional consultation setting'
2025-11-07 20:13:32,324 [INFO] t2v_client:    File: temp_t2v_3_business_scene_4_1762528412.mp4 (33.2 KB)
2025-11-07 20:13:32,341 [INFO] t2v_client: Generating video 5/8: business_scene_5
2025-11-07 20:13:32,342 [INFO] t2v_client: Prompt: 'Executive giving presentation using digital display in modern boardroom'
2025-11-07 20:17:24,316 [INFO] t2v_client:    File: temp_t2v_4_business_scene_5_1762528644.mp4 (57.0 KB)
2025-11-07 20:17:24,324 [INFO] t2v_client: Generating video 6/8: business_scene_6
2025-11-07 20:17:24,324 [INFO] t2v_client: Prompt: 'Professional team celebrating successful deal with congratulations in office environment'
2025-11-07 20:21:16,259 [INFO] t2v_client:    File: temp_t2v_5_business_scene_6_1762528876.mp4 (23.9 KB)
2025-11-07 20:21:16,268 [INFO] t2v_client: Generating video 7/8: business_scene_7
2025-11-07 20:21:16,269 [INFO] t2v_client: Prompt: 'Business advisor explaining strategy to colleagues around conference table'
2025-11-07 20:25:25,111 [INFO] t2v_client:    File: temp_t2v_6_business_scene_7_1762529125.mp4 (87.5 KB)
2025-11-07 20:25:25,122 [INFO] t2v_client: Generating video 8/8: business_scene_8
2025-11-07 20:25:25,123 [INFO] t2v_client: Prompt: 'Corporate professionals discussing plans in bright modern workspace'
2025-11-07 20:29:32,651 [INFO] t2v_client:    File: temp_t2v_7_business_scene_8_1762529372.mp4 (22.0 KB)
2025-11-07 20:29:32,673 [INFO] video_assembler: Starting final video assembly...
2025-11-07 20:29:32,673 [INFO] video_assembler: Step 1: Processing video files...
2025-11-07 20:29:32,674 [INFO] video_assembler:    Processing clip 1/8: temp_t2v_0_business_scene_1_1762527714.mp4
2025-11-07 20:29:34,521 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:34,649 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:34,649 [INFO] video_assembler:    Processing clip 2/8: temp_t2v_1_business_scene_2_1762527947.mp4
2025-11-07 20:29:34,837 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:34,978 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:34,979 [INFO] video_assembler:    Processing clip 3/8: temp_t2v_2_business_scene_3_1762528179.mp4
2025-11-07 20:29:35,133 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:35,265 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:35,265 [INFO] video_assembler:    Processing clip 4/8: temp_t2v_3_business_scene_4_1762528412.mp4
2025-11-07 20:29:35,405 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:35,521 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:35,521 [INFO] video_assembler:    Processing clip 5/8: temp_t2v_4_business_scene_5_1762528644.mp4
2025-11-07 20:29:35,655 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:35,772 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:35,773 [INFO] video_assembler:    Processing clip 6/8: temp_t2v_5_business_scene_6_1762528876.mp4
2025-11-07 20:29:35,902 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:36,022 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:36,022 [INFO] video_assembler:    Processing clip 7/8: temp_t2v_6_business_scene_7_1762529125.mp4
2025-11-07 20:29:36,151 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:36,268 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:36,269 [INFO] video_assembler:    Processing clip 8/8: temp_t2v_7_business_scene_8_1762529372.mp4
2025-11-07 20:29:36,423 [INFO] video_assembler:      Adjusting resolution from 720x480 to 1080x1920
2025-11-07 20:29:36,558 [INFO] video_assembler: Processed: 5.5s, 1080x1920
2025-11-07 20:29:36,559 [INFO] video_assembler: Step 2: Concatenating video segments...
2025-11-07 20:29:37,939 [INFO] video_assembler: Concatenated 8 clips -> 44.3s total
2025-11-07 20:29:37,939 [INFO] video_assembler: Step 3: Adding audio layers...
2025-11-07 20:29:38,106 [INFO] video_assembler:    Adding background music: backgroundMusic1.wav
2025-11-07 20:29:38,288 [INFO] video_assembler:    Background music volume set to 40% for audibility
2025-11-07 20:29:38,288 [INFO] video_assembler: Audio added: 44.3s
2025-11-07 20:29:38,289 [INFO] video_assembler: Step 4: Adding Italian subtitles...
2025-11-07 20:29:38,289 [INFO] video_assembler: Creating subtitles for 128 words with color: white
2025-11-07 20:29:39,014 [INFO] video_assembler: Added 128 subtitle clips
2025-11-07 20:29:39,015 [INFO] video_assembler: Step 5: Exporting final video...
2025-11-07 20:29:39,016 [INFO] video_assembler:    Exporting to: output_videos\angelo_t2v_reel_poc.mp4
2025-11-07 20:38:38,638 [INFO] video_assembler: Video assembly complete: output_videos\angelo_t2v_reel_poc.mp4
2025-11-07 20:38:38,673 [INFO] __main__: Final video created: output_videos\angelo_t2v_reel_poc.mp4
2025-11-07 20:38:38,679 [WARNING] t2v_client: Could not remove temp file temp_t2v_0_business_scene_1_1762527714.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_0_business_scene_1_1762527714.mp4'
2025-11-07 20:38:38,681 [WARNING] t2v_client: Could not remove temp file temp_t2v_1_business_scene_2_1762527947.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_1_business_scene_2_1762527947.mp4'
2025-11-07 20:38:38,683 [WARNING] t2v_client: Could not remove temp file temp_t2v_2_business_scene_3_1762528179.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_2_business_scene_3_1762528179.mp4'
2025-11-07 20:38:38,684 [WARNING] t2v_client: Could not remove temp file temp_t2v_3_business_scene_4_1762528412.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_3_business_scene_4_1762528412.mp4'
2025-11-07 20:38:38,685 [WARNING] t2v_client: Could not remove temp file temp_t2v_4_business_scene_5_1762528644.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_4_business_scene_5_1762528644.mp4'
2025-11-07 20:38:38,686 [WARNING] t2v_client: Could not remove temp file temp_t2v_5_business_scene_6_1762528876.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_5_business_scene_6_1762528876.mp4'
2025-11-07 20:38:38,687 [WARNING] t2v_client: Could not remove temp file temp_t2v_6_business_scene_7_1762529125.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_6_business_scene_7_1762529125.mp4'
2025-11-07 20:38:38,687 [WARNING] t2v_client: Could not remove temp file temp_t2v_7_business_scene_8_1762529372.mp4: [WinError 32] The process cannot access the file because it is being used by another process: 'temp_t2v_7_business_scene_8_1762529372.mp4'
2025-11-07 20:38:38,688 [INFO] __main__: Temporary files cleaned up
2025-11-07 20:38:38,698 [INFO] __main__:    - Transcription + Prompts: 0.1 min
2025-11-07 20:38:38,699 [INFO] __main__:    - T2V Generation: 31.8 min
2025-11-07 20:38:38,700 [INFO] __main__:    - Video Assembly: 9.2 min
